package Strategy;

import Client.Client;
import Exceptions.RequestException;
import Exceptions.RequestUSERException;
import Serveur.FtpRequest;

public class RequestUSER implements Request{

	public void doRequest(FtpRequest ftp, String [] request) throws RequestException{
		/* Test si le client est déjà connecté*/
		Client c = ftp.getClient();
		if(c != null){
			if(c.isConnected()){
				ftp.getWriter().println("Vous êtes déjà connecté.");
			}
			return;
		}
		/* Test si l'usage est correct */
		if(request.length != 2){
			ftp.getWriter().println("USAGE : USER username");
			return;
		}
		/* Test si le user est présent */
		if(ftp.contientClientUsername(request[1])){
			ftp.getWriter().println(331 + " Username correct ");
			ftp.setClient(ftp.getClientByUsername(request[1]));
		}else{
			throw new RequestUSERException(ftp);
		}
	}

}
