package Strategy;

import Exceptions.RequestException;
import Serveur.FtpRequest;

public class RequestPORT implements Request{

	public void doRequest(FtpRequest ftp, String[] request)
			throws RequestException {

		String[] split = request[1].split(",");
		if (split.length != 6) {
			session.sendCommand("501 Syntax error in parameters");
		} else {
			String hostname = split[0] + "." + split[1] + "." + split[2] + "." + split[3];
			int port = Integer.parseInt(split[4]) * 256 + Integer.parseInt(split[5]);
			session.getDataConnectionService().initializeActive(hostname, port);
			session.sendCommand("200 PORT command successfull");
		}
	}

}
